function appendAutoComplete(){$("input[type=text],input[type=password],form").attr("autocomplete","off")}function getSiteUrl(){var e=document.location.toString();if(e.toLowerCase().indexOf("localhost:")>-1)return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"/");var a=e.indexOf("/",e.indexOf("://")+3),t=e.substring(0,a)+"/";return t}function NavigateToPage(e){window.location.href="/"+e}function NavigateToAction(e){window.location=getSiteUrl()+e}function redirectToLogin(){window.location.href="/Login"}function ContactUsSubmit(e){e.preventDefault();var a=$("#form-contact-us");$.validator.unobtrusive.parse(a),a.validate();var t=a.valid();if(t){ShowLoader();var o=$("#form-contact-us").serialize(),n=$("#ReasonId :selected").text();o=o+"&ReasonText="+n,$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/Home/ContactUs",data:o}).done(function(e){if(null!=e.contactUserrorMsg&&void 0!=e.contactUserrorMsg&&""!=e.contactUserrorMsg){var a=e.contactUserrorMsg.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#form-contact-us .error").addClass("validation-summary-errors").removeClass("validation-summary-valid"),$("#form-contact-us .validation-summary-errors ul").html(t),$("#formViewChangePIN .ValidationSummaryCustom").show(),$("#form-contact-us .validation-summary-errors").show(),$("#form-contact-us #success-msg").addClass("d-none")}else""==e.contactUserrorMsg&&($("#form-contact-us .error").hide(),$("#form-contact-us #form-contact-us-inputs").hide(),$("#form-contact-us #success-msg").removeClass("d-none"));HideLoader()}).fail(function(e){HideLoader(),console.log(e)})}}function SelectedSavedTokensValue(e,a,t,o){$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Wallet/SavedTokenCheckBox",data:{csvpromocodes:a,BankID:t,PromocodeCount:o}}).done(function(a){null!=a&&("SUCCESS"==a.result?($(e).find("#tokens-total-value").find(".tokens__amount").text(a.currency),$(e).find("#tokens-total-value").find(".tokens__amount--bold").text(a.totalValue),$(e).find("#tokens-total-fee").find(".tokens__amount").text(a.currency),$(e).find("#tokens-total-fee").find(".tokens__amount--bold").text(a.totalFee),$(e).find("#tokens-adjusted-value").find(".tokens__amount").text(a.currency),$(e).find("#tokens-adjusted-value").find(".tokens__amount--bold").text(a.adjustedValue),$(e).find(".tokens__mycurrency").hide(),void 0!=a.myCurrencyText&&null!=a.myCurrencyText&&a.myCurrencyText.toString().length>0&&($(e).find("#tokens-mycurrency-value").find(".tokens__amount").text(a.myCurrencyText.split(" ")[0]),$(e).find("#tokens-mycurrency-value").find(".tokens__amount--bold").text(a.myCurrencyText.split(" ")[1]),$(e).find(".tokens__mycurrency").show()),0==a.totalFee||"0,00"==a.totalFee?$(".tokens__totalfee").attr("hidden","true"):$(".tokens__totalfee").removeAttr("hidden"),$(e).find("#hdnTotalAmount").val(a.totalValue),$(e).find("#hdnTotalFee").val(a.totalFee),$(e).find("#hdnSavedTokensCount").val(o),$(e).find("#hdnAdjustedValue").val(a.adjustedValue),$(e).find(".validation-summary-valid.error").css({display:"none"}),$(e).find(".validation-summary-valid.error ul").remove(),$(e).find(".tokens__summary button").prop("disabled",!1).removeClass("cards__btn--disabled")):($(e).find(".validation-summary-valid.error").css({display:"block"}),0==$(e).find(".validation-summary-valid.error").find("ul").length&&$(e).find(".validation-summary-valid.error").append("<ul></ul>").find("ul").append("<li>"+a.error+"</li>"),$(e).find(".tokens__summary button").prop("disabled",!0).addClass("cards__btn--disabled")))}).fail(function(e){console.log("Error")})}function SavedTokenCheckBoxSelect(e,a){var t="",o=$(a).closest(".tokens"),n=e.split("_")[1],r=$(o).find(".tokens__list .form__checkbox").length.toString(),l=$(o).find(".tokens__list .form__checkbox:checkbox:checked");if(r==l.length.toString()?$(o).find("#agreement-"+e).prop("checked",!0):$(o).find("#agreement-"+e).prop("checked",!1),null!=l&&void 0!=l&&($(o).find("#tokens-selected").text(l.length.toString()),l.each(function(){t=t+this.id.split("_")[1]+","}),t=t.substring(0,t.length-1)),l.length>0)$(o).find(".tokens__summary button").prop("disabled",!1).removeClass("cards__btn--disabled"),SelectedSavedTokensValue(o,t,n,l.length);else{var i=$(o).find("#tokens-total-value").find(".tokens__amount--bold").text().includes(",")?"0,00":"0.00";$(o).find("#tokens-total-value").find(".tokens__amount--bold").text(i),$(o).find("#tokens-total-fee").find(".tokens__amount--bold").text(i),$(o).find("#tokens-adjusted-value").find(".tokens__amount--bold").text(i),$(o).find("#tokens-mycurrency-value").find(".tokens__amount--bold").text(i),$(o).find(".tokens__summary button").prop("disabled",!0).addClass("cards__btn--disabled")}}function ShowGetTokenConfirmationBox(e,a){var t="",o=(e.split("_")[1],$("#frmSavedTokens-"+e+" .tokens__list .form__checkbox:checkbox:checked"));if(null!=o&&void 0!=o){if($("#tokens-selected").text(o.length.toString()),o.each(function(){t=t+this.id.split("_")[1]+","}),o.length>1){var n=$("#tokenConfirmationMessage").html();t=t.substring(0,t.length-1);var r=$("#frmSavedTokens-"+e+" #tokens-total-fee").text();return $("#tokens-confirmation-modal-"+e+" .modal__desc").html(n.replace("#nooftokens#",o.length).replace("#fee#",r.replace("-",""))),$("#tokens-confirmation-modal-"+e).modal("show"),!1}$("#frmSavedTokens-"+e).submit()}}function SelectAllCheckBoxes(e,a){var t=$(a).closest(".tokens"),o="",n=e.split("_")[1],r=$(t).find(".tokens__list .form__checkbox").length.toString();if($(a).is(":checked"))$(t).find(".tokens__list .form__checkbox").each(function(e,a){o=o+this.id.split("_")[1]+",",a.checked=!0}),$(t).find("#tokens-selected").text(r),o=o.substring(0,o.length-1),SelectedSavedTokensValue(t,o,n,r);else{$(t).find(".tokens__list .form__checkbox").each(function(e,a){a.checked=!1});var l=$(t).find("#tokens-total-value").find(".tokens__amount--bold").text().includes(",")?"0,00":"0.00";$(t).find("#tokens-selected").text("0"),$(t).find("#tokens-total-value").find(".tokens__amount--bold").text(l),$(t).find("#tokens-total-fee").find(".tokens__amount--bold").text(l),$(t).find("#tokens-adjusted-value").find(".tokens__amount--bold").text(l),$(t).find("#tokens-mycurrency-value").find(".tokens__amount--bold").text(l),$(t).find(".tokens__summary button").prop("disabled",!0).addClass("cards__btn--disabled"),$(t).find(".validation-summary-valid.error").css({display:"none"}),$(t).find(".validation-summary-valid.error ul").remove()}}function removeBankAccount(){ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#divRemoveBank").html(),!0)}function removeBankAccountSubmission(){$(".removebankmessage").find("#lblRemoveBankMessage").text(""),$.ajax({async:!0,cache:!1,type:"Get",url:getSiteUrl()+"/Services/Get",data:{url:"/v1/ach/RemoveBank/withpersonid/"+$("#hdnPersonID").val()}}).done(function(e){if(void 0!=e){var a=JSON.parse(e);if(void 0!=a&&null!=a){var t=a.success,o=a.errorMessage;null!=t&&void 0!=t&&t?($("#divExistingBank").addClass("d-none"),$("#divNewBank").removeClass("d-none"),ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#divRemoveBankSuccess").html(),!0),UpdateTransferToBankTransactionDetailPageView()):($(".removebankmessage").removeClass("d-none"),$(".removebankmessage").find("#lblRemoveBankMessage").text(o))}}}).fail(function(e){console.log("error")})}function OpenTransferToBankPopup(e){var a=$(e).attr("data-popuptype");null!=a&&void 0!=a&&"RetryBankRetrieve"==a?$.ajax({async:!0,cache:!1,type:"GET",url:getSiteUrl()+"/Services/Get",data:{url:"/v1/ach/BankAccount/withpersonid/"+$("#hdnPersonID").val()}}).done(function(e){if(void 0!=e){var a=JSON.parse(e);if(void 0!=a&&null!=a){var t=a.success,o=a.bankName,n=a.last4OfAccount,r=(a.errorCode,a.errorMessage);null!=t&&void 0!=t&&t?null!=n&&void 0!=n?($(".clslnkTransferToBank").attr("data-popuptype","TransferToBank"),$("#lblBankName").text(o),$("#lblAccountNumber").html(n.replace(/x/g,'<span class="modal__asterisk">J</span>')),$("#divExistingBank").removeClass("d-none"),$("#divNewBank").addClass("d-none"),OpenTransferToExistingBankAccountPopup(o,n)):OpenAddNewBankPopup():ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#divTransferToBankError").html(),!0,function(){$("#generic-modal").find("#divTransferToBankError_ErrorMessage").html(r)})}}}).fail(function(e){console.log("error")}):null!=a&&void 0!=a&&"TransferToBank"==a?OpenTransferToExistingBankAccountPopup():OpenAddNewBankPopup()}function OpenAddNewBankPopup(e){ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#fromT2BAddNewBankAccount").html(),!0,function(){$(".BankName").val(""),$(".divAccountNumber").hide(),$(".divConfirmAccountNumber").hide(),$("#hdnRoutingNumber").val(""),$("#hdnAccountNumber").val(""),$("#hdnConfirmAccountNumber").val(""),$(".AddNewBankDialog").find("#pAddNewBank_BankName").hide(),$(".txtRoutingNumber").ForceTextBoxEntry({ForceType:"numericonly"}),$(".txtAccountNumber").ForceTextBoxEntry({ForceType:"numericonly"}),$(".txtConfirmAccountNumber").ForceTextBoxEntry({ForceType:"numericonly"}),$(".txtAccountNumber").unbind("cut copy").bind("cut copy",function(e){e.preventDefault()})},null,function(){null!=e&&void 0!=e&&"FromTransferToExistingBank"==e&&$(".bootstrap-dialog-message #fromT2BAddNewBankAccount").is(":visible")&&$(".bootstrap-dialog-message #fromT2BAddNewBankAccount").hide()})}function OpenTransferToExistingBankAccountPopup(e,a){void 0==e&&(e=$("#lblBankName").html()),void 0==a&&(a=$("#lblAccountNumber").html());var t=$("#hdnACH_ID").val(),o=$("#hdnPersonID").val(),n=$("#hdnCardProxy").val();void 0!=t&&void 0!=o&&void 0!=n&&$.ajax({async:!0,cache:!1,type:"GET",url:getSiteUrl()+"/Services/Get",data:{url:"/v1/ach/configuration/"+t+"/forperson/"+o+"/forcardproxy/"+n}}).done(function(t){if(void 0!=t){var o=JSON.parse(t);if(void 0!=o&&null!=o){var n=o.success,r=o.errorMessage,l=o.transferMin,i=o.transferMax,d=o.cardBalance,s=o.fees;if(void 0!=n&&n){var c=$(t2bhtmlResult).filter("#frmT2BExistingBankAccount").html();ShowBootstrapModal(null,null,c.replace(/##VARIABLENAME##/g,"TermsAccepted"),!0,function(){$("#generic-modal .lblCardCurrency").html($("#hdnCardCurrency").val()),null!=e&&void 0!=e&&$("#generic-modal #lblBankName").html(e),null!=a&&void 0!=a&&$("#generic-modal #lblBankAccount").html(a),$("#generic-modal #lblTransferMin").html(parseFloat(l).toFixed(2)),$("#generic-modal #lblTransferMax").html(parseFloat(i).toFixed(2)),$("#generic-modal #lblAvailableCardBalance").html(parseFloat(d).toFixed(2)),$("#generic-modal #lblTransferFees").html(parseFloat(s).toFixed(2))})}else null!=r&&void 0!=r&&r.length>0&&(r=r.replace("##TransferMin##",parseFloat(l).toFixed(2)),r=r.replace("##Fees##",parseFloat(s).toFixed(2))),ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#divTransferToBankError").html(),!0,function(){$("#generic-modal").find("#divTransferToBankError_ErrorMessage").html(r)})}}}).fail(function(e){console.log("error")})}function validateRoutingNumber(e){$(".txtAccountNumber").val(""),$("#hdnAccountNumber").val(""),$(".BankName").addClass("d-none"),$(".divAccountNumber").addClass("d-none"),$(".errRoutingNumber").addClass("d-none"),$(".errAccountNumber").addClass("d-none");var a=$(e).siblings(".txtRoutingNumber").val();a.indexOf("x")>-1&&(a=$("#hdnRoutingNumber").val());a.length>=9&&!isNaN(a)?$.ajax({async:!0,cache:!1,type:"GET",url:getSiteUrl()+"/Services/Get",data:{url:"/v1/ach/ValidateRoutingNumber/"+a}}).done(function(e){if(void 0!=e){var t=JSON.parse(e);if(void 0!=t&&null!=t){var o=t.success,n=t.bankName;null!=o&&void 0!=o&&o?($(".BankName").removeClass("d-none"),$(".BankName").text(n),$("#generic-modal form .content-disabled").find("input").removeAttr("disabled"),$("#generic-modal form .content-disabled").find("select").removeAttr("disabled"),$("#generic-modal .t2b__accountsection").removeClass("content-disabled"),$(".txtAccountNumber").focus()):(""!=a&&null!=a&&$("#generic-modal .errRoutingNumber").removeClass("d-none"),$(".txtRoutingNumber").focus())}}}).fail(function(e){""!=a&&null!=a&&$("#generic-modal .errRoutingNumber").removeClass("d-none"),$(".txtRoutingNumber").focus()}):(""!=a&&null!=a&&$("#generic-modal .errRoutingNumber").removeClass("d-none"),$(".txtRoutingNumber").focus()),$("#hdnRoutingNumber").val(a),$(e).siblings(".txtRoutingNumber").val(a.replace(/.(?=.{3})/g,"x"))}function validateAccountNumber(e){$(".txtConfirmAccountNumber").val(""),$("#hdnConfirmAccountNumber").val(""),validateConfirmAccountNumber("#ConfirmAccountNumber");var a=$(e).val();$("#hdnAccountNumber").val(a),a.length>=3&&a.length<=17?isNaN(a)?$("#generic-modal .errAccountNumber").removeClass("d-none"):($("#generic-modal .errAccountNumber").addClass("d-none"),$("#generic-modal .errConfirmAccountNumber").addClass("d-none"),$(e).val(maskingBankAccount(a)),$("#generic-modal .txtConfirmAccountNumber").focus()):$("#generic-modal .errAccountNumber").removeClass("d-none")}function validateConfirmAccountNumber(e){var a=$(e).val(),t=$("#hdnAccountNumber").val(),o=!1;$("#hdnConfirmAccountNumber").val(a),o=a.length>=3&&a.length<=17&&t==a,o?($(e).val(maskingBankAccount(a)),$("#generic-modal .btnT2BContinue").removeClass("btn-disabled").removeClass("modal__btn--disabled").removeAttr("disabled").attr("onclick","AddingNewBankAccount()"),$("#generic-modal .errConfirmAccountNumber").addClass("d-none")):($("#generic-modal .errConfirmAccountNumber").removeClass("d-none"),$("#generic-modal .btnT2BContinue").addClass("btn-disabled").addClass("modal__btn--disabled").attr("disabled","disabled").removeAttr("onclick"))}function validateAmounttotransfer(e){var a=$(e).val();$("#generic-modal .errTransferAmount").addClass("d-none"),void 0!=a&&a.length>0&&(a>0?$("#generic-modal .errTransferAmount").addClass("d-none"):$("#generic-modal .errTransferAmount").removeClass("d-none"))}function validateTransferEmailAddress(e,a){var t=$(e).val();$("#generic-modal .errTransferEmailAddress").addClass("d-none"),void 0!=t&&t.length>0&&(ValidateEmail(t,a)?$("#generic-modal .errTransferEmailAddress").addClass("d-none"):$("#generic-modal .errTransferEmailAddress").removeClass("d-none"))}function showDataonFocus(e){var a=$("#hdn"+e.id).val();void 0!=a&&""!=a&&""!=a?$(e).val(a):$(e).val(""),"RoutingNumber"==e.id&&($(".BankName").addClass("d-none"),$("#hdnAccountNumber").val(""),$("#hdnConfirmAccountNumber").val(""),$(".divAccountNumber").addClass("d-none"),$(".divConfirmAccountNumber").addClass("d-none"))}function AddingNewBankAccount(){var e=$("#hdnAccountNumber").val(),a=$("#hdnConfirmAccountNumber").val(),t=$("#hdnRoutingNumber").val(),o=$("#hdnPersonID").val(),n=$("#AccountTypeID").val(),r=$("#hdnRecipient_EmailAddress").val(),l=$("#hdnFrom_EmailAddress").val(),i=$("#hdnFirstName").val(),d=$("#hdnLastName").val(),s=$("#hdnMaskedCardNumber").val(),c=$("#hdnSiteUrl").val(),m=$("#hdnSiteUrl").val()+"contactus",u=($("#hdnCardProxy").val(),$("#hdnCardCurrency").val(),{PersonID:o,FundsTypeID:n,AccountNum:e,TRN:t,Recipient_EmailAddress:r,From_EmailAddress:l,FirstName:i,LastName:d,MaskedCardNumber:s,SiteUrl:c,ContactUsUrl:m});e==a?$.ajax({async:!0,cache:!1,type:"POST",contentType:"application/json",url:getSiteUrl()+"/Services/Post?url=/v1/ach/AddExternal/",data:JSON.stringify(u)}).done(function(e){if(void 0!=e){var a=JSON.parse(e);if(void 0!=a&&null!=a){var t=a.success,o=(a.errorCode,a.errorMessage);null!=t&&void 0!=t&&t?(ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#T2BAddNewBankAccountSuccess").html(),!0),UpdateTransferToBankTransactionDetailPageView()):($(".AddNewBankDialog").find("#lblAddNewbankError").html(o),$("#generic-modal #lblAddNewbankError").show())}}}).fail(function(e){showAccountNumber=!1}):showAccountNumber=!1}function validateTransferToBankForm(e){var a="",t=$("#generic-modal #EmailAddress").val(),o=null==$("#generic-modal #AmountToTransfer").val()||""==$("#generic-modal #AmountToTransfer").val()?"0.00":$("#generic-modal #AmountToTransfer").val(),n=null==$("#generic-modal #lblTransferMin").html()||""==$("#generic-modal #lblTransferMin").html()?"0.00":$("#generic-modal #lblTransferMin").html(),r=null==$("#generic-modal #lblTransferMax").html()||""==$("#generic-modal #lblTransferMax").html()?"0.00":$("#generic-modal #lblTransferMax").html(),l=null==$("#generic-modal #lblTransferFees").html()||""==$("#generic-modal #lblTransferFees").html()?"0.00":$("#generic-modal #lblTransferFees").html(),i=null==$("#generic-modal #lblAvailableCardBalance").html()||""==$("#generic-modal #lblAvailableCardBalance").html()?"0.00":$("#generic-modal #lblAvailableCardBalance").html();return $("#generic-modal #TermsAccepted").is(":checked")||(a+="<li> "+$("#generic-modal .errTermsAccepted").text()+" </li>"),""==t||void 0==t||null==t?a+="<li>"+$("#generic-modal .errEmailRequired").text()+" </li>":ValidateEmail(t,e)||(a+="<li> "+$("#generic-modal .errEmailRequired").text()+" </li>"),(parseFloat(o)+parseFloat(l)).round(2)>parseFloat(i).round(2)&&(a+="<li> "+$("#generic-modal #errTotalAmountExceeds").text()+" </li>"),parseFloat(o).round(2)<parseFloat(n).round(2)&&(a+="<li> "+$("#generic-modal #errTotalAmountBelowMin").text()+" </li>"),parseFloat(o).round(2)>parseFloat(r).round(2)&&(a+="<li> "+$("#generic-modal #errTotalAmountAboveMax").text()+" </li>"),a}function ValidateEmail(e,a){var t=new RegExp(a,"g");return t.test(e)}function ConfirmTransferToBank(e){$("#generic-modal .errTermsAccepted").addClass("d-none"),$("#generic-modal .errTransferAmount").addClass("d-none"),$("#generic-modal .errTransferEmailAddress").addClass("d-none"),$("#generic-modal .errTransferAmount").addClass("d-none"),$("#generic-modal .error").addClass("validation-summary-valid").removeClass("validation-summary-error");var a=$(".modal-dialog #EmailAddress").val(),t=$(".modal-dialog #AmountToTransfer").val();if(!(void 0!=a&&a.length>0))return $("#generic-modal .errTransferEmailAddress").removeClass("d-none"),!1;var o=new RegExp(e);if(!o.test(String(a).toLowerCase()))return $("#generic-modal .errTransferEmailAddress").removeClass("d-none"),!1;if($("#generic-modal .errTransferEmailAddress").addClass("d-none"),!(void 0!=t&&t.length>0))return $("#generic-modal .errTransferAmount").removeClass("d-none"),!1;if(!(t>0))return $("#generic-modal .errTransferAmount").removeClass("d-none"),!1;$("#generic-modal .errTransferAmount").addClass("d-none");var n=$("#hdnPersonID").val(),r=$("#hdnCardProxy").val(),l=$("#hdnACH_ID").val(),i=$("#hdnRecipient_EmailAddress").val(),d=$("#hdnFrom_EmailAddress").val(),s=$("#hdnFrom_BankName").val(),c=$("#hdnFrom_ExtFundsID").val(),m=$("#hdnFirstName").val(),u=$(".t2bExistingBankAccount #lblBankAccount").text(),f=$("#hdnSiteUrl").val()+"contactus",h=$("#hdnSiteUrl").val(),v=$("#hdnCardCurrency").val(),p="DIGITALWALLET";if($("input#TermsAccepted").is(":checked")){var g=validateTransferToBankForm(e);if(""===g&&0==g.length){var _={PersonID:n,CardProxy:r,TransferAmount:t,ACHId:l,TransferEmailAddress:a,RecipientEmailAddress:i,FromEmailAddress:d,BankName:s,ExternalFundsID:c,FirstName:m,MaskedAccountNumber:u,MaskedCardnumber:"",ContactUsUrl:f,SiteUrl:h,CardCurrency:v,InitiatedSystem:p};$.ajax({async:!0,cache:!1,type:"POST",contentType:"application/json",url:getSiteUrl()+"/Services/Post?url=/v1/ach/TransferToBank/",data:JSON.stringify(_)}).done(function(e){if(void 0!=e&&null!=e){var t=JSON.parse(e);if(void 0!=t&&null!=t){var o=t.success,n=(t.errorCode,t.errorMessage),l=t.previousCardBalance,i=t.transferAmount,d=t.fees,s=t.newAvailableCardBalance;null!=o&&void 0!=o&&o?($.ajax({async:!0,cache:!1,type:"POST",url:getSiteUrl()+"/Wallet/ClearCardTransactions",data:{cardproxy:r}}),ShowBootstrapModal(null,null,$(t2bhtmlResult).filter("#divTransfertoBankSubmissionSuccess").html(),!0,function(e){$("#generic-modal #TransferToBankSuccessMessage").html($("#generic-modal #TransferToBankSuccessMessage").html().replace("##T2BEMAILADDRESS##",a)),$("#generic-modal #lblPreviousCardBalance").html(v+" "+l.toFixed(2)),$("#generic-modal #lblTransferAmount").html(v+" "+i.toFixed(2)),$("#generic-modal #lblTransferFees").html(v+" "+d.toFixed(2)),$("#generic-modal #lblNewAvailableCardBalance").html(v+" "+s.toFixed(2)),HideLoader()},null,function(){$.ajax({url:getSiteUrl()+"/Home/ClearSession",data:{name:"USER_REDEMPTION_HISTORY"},success:function(){window.location.reload()},error:function(e){console.log(e)}})})):($("#generic-modal .errT2BConfirm").html(n),$("#generic-modal .error").removeClass("validation-summary-valid").addClass("validation-summary-error"),$("#generic-modal .errT2BConfirm").removeClass("d-none"))}}else $("#generic-modal .errT2BConfirm").text("Error Occured - Please try again later."),$("#generic-modal .error").removeClass("validation-summary-valid").addClass("validation-summary-error"),$("#generic-modal .errT2BConfirm").removeClass("d-none");HideLoader()}).fail(function(e){showAccountNumber=!1})}else $("#generic-modal .error").removeClass("validation-summary-valid").addClass("validation-summary-error"),$("#generic-modal .errT2BConfirm").html(g),$("#generic-modal .errT2BConfirm").removeClass("d-none")}else $("#generic-modal .error").removeClass("validation-summary-valid").addClass("validation-summary-error"),$("#generic-modal .errTermsAccepted").removeClass("d-none")}function maskingBankAccount(e){var a=e,t=a.substring(0,1),o=a.slice(-1),n="";return n=a.substr(1).slice(0,-1).replace(/.(?=.*)/g,"x"),t+n+o}function EmailVerification_Resent(){var e=$(".content").html();e=e.replace("sent","resent"),ShowBootstrapModal(null,null,e,!1)}function ShowCMSW9ByParticipantID(e){$("#multipleW9-modal .modal__close").click(),void 0!=e&&e.length>0&&$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",data:{ParticipantID:e},url:getSiteUrl()+"/Wallet/DisplayW9ByParticipantID"}).done(function(e){addIFrameListner(),$("#w9-modal .modal__body--w9").html(e),$("#w9-modal").modal("show")}).fail(function(e){console.log("error")})}function ShowSinglePayement(){$(".cards__detail").find("#cardCollapsableContent").collapse("toggle"),$(".cards__detail").find("#MyWallet_Btn_ShowDetails").click()}function RemoveEventHandler(){var e=window.removeEventListener?"removeEventListener":"detachEvent",a=window[e],t="detachEvent"==e?"onmessage":"message";a(t,addIFrameListnerEventReference,!1)}function setContinueLoader(e){var a=$("#"+e);a.valid()?$(".loading").show():$(".loading").hide()}function clearLoginStorage(){localStorage.getItem("userLoggedIn")&&localStorage.removeItem("userLoggedIn")}var $hideAjaxLoader=!1,$CurrentActiveCard,cardsList,t2bhtmlResult;$(document).ready(function(){$(document).ajaxStart(function(){$hideAjaxLoader||$(".loading").show()}),$(document).ajaxStop(function(){$(".loading").hide(),$hideAjaxLoader=!1}),$(document).ajaxError(function(){$(".loading").hide(),$hideAjaxLoader=!1,window.location.href="/Home/Error"}),$("#DIGITALWALLET_LOGIN_MODULE .tabs__link").each(function(){$(this).children()[0].scrollHeight>$(this)[0].offsetHeight&&$("#DIGITALWALLET_LOGIN_MODULE .tabs__link").css("font-size",$(this)[0].offsetHeight/$(this).children()[0].scrollHeight*parseInt($(this).css("font-size"))+"px"),$(this).children().outerWidth()>120&&$("#DIGITALWALLET_LOGIN_MODULE .tabs__link").css("font-size",120/$(this)[0].offsetWidth*parseInt($(this).css("font-size"))+"px")}),$("#myMenu").off("click").on("click",function(e){$(".nav-openMenu").toggleClass("hide"),$("#myMenu").toggleClass("myMenuBoxShadow"),$(".nav-openMenu > ul").toggleClass("openMenuBoxShadow"),$(".userInfo .userProfile > .open-profile").addClass("hide"),$(".userInfo").removeClass("userInfoBoxShadow"),$(".userInfo .userProfile > .open-profile ul").removeClass("openProfileBoxShadow"),e.stopPropagation()}),$(".userInfo .userProfile").off("click").on("click",function(e){$(".userInfo .userProfile > .open-profile").toggleClass("hide"),$(".userInfo").toggleClass("userInfoBoxShadow"),$(".userInfo .userProfile > .open-profile ul").toggleClass("openProfileBoxShadow"),$("#myMenu").removeClass("myMenuBoxShadow"),$(".nav-openMenu > ul").removeClass("openMenuBoxShadow"),$(".nav-openMenu").addClass("hide"),e.stopPropagation()}),$(document).click(function(){$(".nav-openMenu").addClass("hide"),$(".userInfo .userProfile > .open-profile").addClass("hide"),$(".userInfo").removeClass("userInfoBoxShadow"),$(".userInfo .userProfile > .open-profile ul").removeClass("openProfileBoxShadow"),$("#myMenu").removeClass("myMenuBoxShadow"),$(".nav-openMenu > ul").removeClass("openMenuBoxShadow")}),$(".js-slide-button").on("click",function(){$(".slide").hasClass("slide-in")?($(".slide").toggleClass("slide-in slide-out"),$(".nav__button--wrapper").toggleClass("slide-in slide-out--button")):($(".slide").removeClass("slide-out").addClass("slide-in"),$(".nav__button--wrapper").removeClass("slide-out--button").addClass("slide-in"))}),$(".js-open-side-menu").on("click",function(){var e=$(this).data("target");$(".slide__menu--side").not(e).removeClass("d-block"),$(e).toggleClass("d-block")}),$(".js-collapsable").on("show.bs.collapse",function(){var e=$(this).attr("id"),a=$(this).parent().find("[data-target='#"+e+"']");a.find(".js-dropdown-caret").html("H"),a.addClass("nav__item__link--expanded")}),$(".js-collapsable").on("hide.bs.collapse",function(){var e=$(this).attr("id"),a=$(this).parent().find("[data-target='#"+e+"']");a.find(".js-dropdown-caret").html("C"),a.removeClass("nav__item__link--expanded")}),1==$(".cards__detail").length&&ShowSinglePayement(),$(".js-collapse-button").on("blur",function(e){setTimeout(function(){$(".nav__item--dropdown").is(":focus")||$(".nav__collapse").collapse("hide")},1)}),$(".js-slide-button, .slide__link").on("focusout",function(e){e.preventDefault(),setTimeout(function(){$(".slide__link").is(":focus")||($(".slide").removeClass("slide-in").addClass("slide-out"),$(".js-slide-button").parent().removeClass("slide-in").addClass("slide-out--button"))},1)}),$("#DIGITALWALLET_MYWALLET_MODULE").on("click.collapse-next","[data-toggle=collapse-next]",function(){var e=$(this).closest(".cards__detail").find("#cardCollapsableContent"),a=$(this).closest(".cards__detail").find(".cards__collapse"),t=$(this).closest(".cards__detail").find(".cards__collapse--transparent");"C"===t.html()?t.html("H"):t.html("C"),"C"===a.html()?a.html("H"):a.html("C"),e.collapse("toggle")}),$("#DIGITALWALLET_MYWALLET_MODULE .js-card-collapsable").on("show.bs.collapse",function(){$(this).parent().find(".cards__section:nth-of-type(2)").removeClass("cards__section--borderless"),$(this).parent().next().find(".widget__desc").toggleClass("d-block d-none"),$(this).parent().find(".widgets.d-md-none").addClass("pb-2")}),$("#DIGITALWALLET_MYWALLET_MODULE .js-card-collapsable").on("hide.bs.collapse",function(){$(this).parent().find(".cards__section:nth-of-type(2)").addClass("cards__section--borderless"),$(this).parent().next().find(".widget__desc").toggleClass("d-block d-none"),$(this).parent().find(".widgets.d-md-none").removeClass("pb-2")}),$(".ShowLoader").on("click",function(e){if(null!=e.currentTarget.getAttribute("onclick")&&e.currentTarget.getAttribute("onclick").indexOf("history")!=-1)ShowLoader();else if(void 0!=this.form.id&&""!=this.form.id){var a=$("#"+this.form.id);void 0!=a.valid&&a.valid()?ShowLoader():HideLoader()}else ShowLoader()}),$(".js-show-password").on("click",function(){var e=$(".js-password-toggle"),a=$(".js-show-password");"password"===e.attr("type")?(e.attr("type","text"),a.text(a.data("text-hide")).attr("id","hidepwd")):(e.attr("type","password"),a.text(a.data("text-show")).attr("id","showpwd"))}),$(".js-show-password-multiple").on("click",function(){$(".js-password-toggle-multiple").each(function(){"password"===$(this).attr("type")?($(this).attr("type","text"),$(".js-show-password-multiple").each(function(){$(this).html($("#hdnHidePasswords").val()),$(this).attr("id","hidepwd")})):($(this).attr("type","password"),$(".js-show-password-multiple").each(function(){$(this).html($("#hdnShowPasswords").val()),$(this).attr("id","showpwd")}))})}),$("#DIGITALWALLET_REDEMPTIONOPTIONS_MODULE").on("click.collapse-next","[data-toggle=collapse-next]",function(){var e=$(this).parents(".cards__detail:first").find(".js-card-collapsable"),a=$(this).find(".cards__more__icon");"C"==a.html()?a.html("H"):a.html("C"),e.collapse("toggle")}),$("#DIGITALWALLET_REDEMPTIONOPTIONS_MODULE .js-card-collapsable").on("show.bs.collapse",function(){$(".js-expand-all").html($(".js-expand-all").data("text-collapse"))}),$("#DIGITALWALLET_REDEMPTIONOPTIONS_MODULE .js-card-collapsable").on("hide.bs.collapse",function(){$(".js-expand-all").html($(".js-expand-all").data("text-expand"))}),$("#DIGITALWALLET_REDEMPTIONOPTIONS_MODULE .js-expand-all").on("click",function(){$(this).html()==$(this).data("text-expand")?($(".js-card-collapsable").collapse("show"),$(".cards__detail__title .cards__more__icon").html("H")):($(".cards__detail__title .cards__more__icon").html("C"),$(".js-card-collapsable").collapse("hide"))}),$(".js-copy-target").text($(".js-copy-target").text().replace(/(\d{4})/g,"$1 ").replace(/(^\s+|\s+$)/,"")),$(".js-copy").on("click",function(){var e=$("<textarea>"),a=$(".js-copy-target").text().replace(/\s+/g,"");$("body").append(e),e.val(a).select(),document.execCommand("copy"),e.remove()}),$("input").on("change paste keyup",function(){var e=$(this).parent().children(".form__info");$(this).val().length>0?e.hide():e.show()}),$(".form__info").each(function(){$(this).prev().is("input")&&$(this).prev().css("padding-right","35px")}),$("#secure-payment-modal").on("click",".js-show-password",function(){$(".js-password-toggle").each(function(){"password"===$(this).attr("type")?$(this).attr("type","text"):$(this).attr("type","password")});var e=$(this).attr("id");e.indexOf("show")>-1?$(this).html($("hdnHide").val()).attr("id","hidepwd"):e.indexOf("hide")>-1&&$(this).html($("#hdnShow").val()).attr("id","showpwd")}),$("#secure-payment-modal").on("click",".js-show-password-multiple",function(){$(".js-password-toggle-multiple").each(function(){"password"===$(this).attr("type")?$(this).attr("type","text"):$(this).attr("type","password")});var e=$(this).attr("id");e.indexOf("show")>-1?$(this).html($("#hdnHidePasswords").val()).attr("id","hidepwd"):e.indexOf("hide")>-1&&$(this).html($("#hdnShowPasswords").val()).attr("id","showpwd")}),$('input:radio[name="wallet-choice"]').change(function(){$("#secure-payment-modal .validation-summary-valid.error").css({display:"none"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li"),this.checked&&("current-wallet"===this.id?$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/AddToWalletV2"}).done(function(e){$("#secure-payment-modal .modal_body").html(e)}).fail(function(e){console.log("error")}):"new-wallet"===this.id&&$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/CreateWalletV2"}).done(function(e){$("#secure-payment-modal .modal_body").html(e)}).fail(function(e){console.log("error")}))}),setTimeout(function(){$(".grecaptcha-badge").animate({opacity:1},500),$(".carouselModule").length<1&&$(".intro").removeClass("d-none")},1300),$(".gdprpolicy__cookie").animate({bottom:"30px"},1200,function(){$("#DIGITALWALLET_LOGIN_MODULE").length>0&&$("#carouselModule").length<1&&$(".cookie-container .push").hide(),$(".grecaptcha-badge").attr("style",function(e,a){return a+"bottom: 135px !important;"})}),appendAutoComplete()}),jQuery.fn.ForceTextBoxEntry=function(e){return this.each(function(){$(this).keypress(function(a){var t;if(void 0!=Option&&"numericonly"===e.ForceType&&(t=new RegExp("^[0-9]+$")),void 0!=t&&null!=t){var o=String.fromCharCode(event.charCode?event.charCode:event.which);if(!t.test(o))return event.preventDefault(),!1}})})};var AllowNumericandDecimalPoints=function(e,a){var t=a.value,o=/^([0-9]+[\.]?[0-9]?[0-9]?|[0-9]+)$/g,n=/^([0-9]+[\.]?[0-9]?[0-9]?|[0-9]+)/g;o.test(t)||(t=n.exec(t),t?a.value=t[0]:a.value="")};Number.prototype.round=function(e){return e=e||10,parseFloat(this.toFixed(e))},$.validator.addMethod("equalcaseinsensitiveto",function(e,a,t){
return e.toLowerCase()===$(t).val().toLowerCase()}),$.validator.addMethod("mustbetrue",function(e,a,t){return void 0!=e&&"true"==e.toLowerCase()}),$(window).on("load",function(){setTimeout(function(){appendAutoComplete()},5e3)});var CopyCardNumber=function(e){var a=$("<textarea>"),t=$(e).closest(".cards__detail").find(".js-copy-target").text();$("body").append(a),a.val(t).select(),document.execCommand("copy"),a.remove()},ShowLoader=function(){$(".loading").show()},HideLoader=function(){$(".loading").hide()},OnChangeTransactionDateDrpdown=function(){$("#hdnCardtransactionTypeValue").val($(".transaction__drpDownDate").val()),getCardtransactions(),$("#hdnCardtransactionTypeValue").val(void 0)},ShowCMSFaq=function(e,a){void 0!=e&&null!=e||(e=0),$.ajax({async:!0,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Home/Faq",data:{templateID:e}}).done(function(e){void 0!=a&&null!=a?(($("#replace").find("#site-faq").length||$("#replace").is(":empty"))&&($("#contact-us-modal").remove(),$("#site-faq").remove(),$("#replace").empty(),$(".modal-backdrop").hasClass("show")&&$(".modal-backdrop").remove()),$("<div></div>").html(e).appendTo("body"),$("#replace").hide(),$("#site-faq").on("hidden.bs.modal",function(){$("#replace").show()})):$("#replace").html(e),$("#site-faq").modal("show"),$("#faq-accordion").on("show.bs.collapse",function(e){$("#faq-accordion button").removeClass("active"),$(e.target).parent().find("button").addClass("active")})}).fail(function(e){console.log("error")})},ShowCMSTerms=function(){$.ajax({async:!0,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Home/Terms"}).done(function(e){$("#replace").html(e),$("#site-terms").modal("show")}).fail(function(e){console.log("error")})},ShowCMSContactUs=function(){$.ajax({async:!0,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ContactUs",data:{includeMaster:!1}}).done(function(e){$("#replace").html(e),$("#contact-us-modal").modal("show"),mixpanelEvents.contactUs()}).fail(function(e){console.log("error")})},ShowContactUs=function(e){$.ajax({async:!0,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ContactUs",data:{includeMaster:!1}}).done(function(a){void 0!=e&&null!=e?(($("#replace").find("#contact-us-modal").length||$("#replace").is(":empty"))&&($("#contact-us-modal").remove(),$("#site-faq").remove(),$("#replace").empty(),$(".modal-backdrop").hasClass("show")&&$(".modal-backdrop").remove()),$("<div></div>").html(a).appendTo("body"),$("#replace").hide(),$("#contact-us-modal").on("hidden.bs.modal",function(){$("#replace").show()}),$("#contact-us-modal").modal("show")):($("#replace").html(a),$("#contact-us-modal").modal("show")),mixpanelEvents.contactUs()}).fail(function(e){console.log("error")})},ChangeMyCurrency=function(e){$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/Home/MyCurrency",data:{currencyCode:e}}).done(function(e){location.reload()}).fail(function(e){}),ClosePopup()},ShowCMSMyCurrency=function(){$.ajax({async:!1,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Home/MyCurrency"}).done(function(e){$(".js-currencies").html(e)}).fail(function(e){console.log("error")})},ShowCMSSpecificTerms=function(e){$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Wallet/TransactionDetailTerms",data:{TermsId:e}}).done(function(e){clearGenericModal(),$("#generic-modal .modal__header").html("<div class='modal__title'>"+e.modalTitle+"</div>"),$("#generic-modal .modal__dialog").addClass("modal__dialog--table"),$("#generic-modal .modal__body").removeClass("modal__body").addClass("terms"),$("#generic-modal .terms").html(e.htmlText),$("#generic-modal").modal("show")}).fail(function(e){console.log("error")})},ShowTermsById=function(e){$.ajax({async:!0,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Wallet/TransactionDetailTerms",data:{TermsId:e}}).done(function(e){var a=$("#site-agreement-terms");a.find(".modal__title").text(e.modalTitle),a.find(".modal__text").html(e.htmlText),a.modal("show"),$("#site-agreement-terms, .siteAgreementTerms").animate({scrollTop:0},"slow")}).fail(function(e){console.log("error")})},ClosePopup=function(){$(".modal").modal("hide")},inActiveShown=!1,autologoutInterval,InActivityLogout=function(e){var a=6e5;isNaN(e)||(a=60*e*1e3);var t,o=20;new Idle({onAway:function(){$("#inactivity-logout-modal").on("show.bs.modal",function(){clearInterval(autologoutInterval),t=o,$("#InActivityLogout_time").text(t),autologoutInterval=setInterval(function(){t-=1,t<=0&&(clearInterval(autologoutInterval),window.location.href=getSiteUrl()+"/Logout?type=Inactivity"),$("#InActivityLogout_time").text(t)},1e3)}).on("hide.bs.modal",function(){clearInterval(autologoutInterval)}),$("#inactivity-logout-modal").modal("show")},onAwayBack:function(){},awayTimeout:a}).start()},RedemptionTranscationPrint=function(e){$.ajax({async:!0,cache:!1,type:"GET",url:getSiteUrl()+"/MyWallet/Detail/Print/"+e}).done(function(e){if(void 0!==e&&null!==e&&""!==e){var a=e,t=window.open("","","left=0,top=0,width=800,height=600,toolbar=0,scrollbars=1,status=0");t.document.write("<html><head><title></title></head><body>"+a+"</body>"),setTimeout(function(){t.document.close(),t.focus(),t.print(),t.close()},1e3)}}).fail(function(e){console.log(e)})},RedemptionTransactionFeesPrint=function(e,a){$("#hdnCardtransactionTypeValue").val($(".transaction__drpDownDate").val());var t=$("#hdnCardtransactionTypeValue").val();void 0!=t&&null!=t&&""!=t||(t="Last30Day"),void 0!=e&&null!=e||(e=1);var o=$(a).closest(".cards__actions").find("#hdncardProxy").val();void 0!=o&&null!=o||(o=$("#hdnTransaction_CardProxy").val());var n=$(a).closest(".cards__actions").find("#hdncurrency").val();void 0!=n&&null!=n||(n=$("#hdnTransaction_Currency").val());var r=$(a).closest(".cards__actions").find("#hdnProductCategory").val();void 0!=r&&null!=r||(r=$("#hdnTransaction_ProductCategory").val());var l=$(a).closest(".cards__actions").find("#hdnRedemptionProductName").val();void 0!=l&&null!=l||(l=$("#hdnTransaction_RedemptionProductName").val());var i=$(a).closest(".cards__actions").find("#hdnCardEnding").val();void 0!=i&&null!=i||(i=$("#hdnTransaction_CardEnding").val());var d="isMTD";$("#myTab").find("#YTD-tab").hasClass("active")&&(d="isYTD"),void 0!=o&&null!=o&&void 0!=n&&null!=n&&$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/CardTransactionsFeePrint",data:{cardProxy:o,ProductCategory:r,TransactionType:t,Currency:n,ProductName:l,CardEnding:i,pageNo:e,TabSelection:d},beforeSend:function(){$(".loading").show()}}).done(function(e){if(void 0!==e&&null!==e&&""!==e){var a=e,t=window.open("","","left=0,top=0,width=800,height=600,toolbar=0,scrollbars=1,status=0");t.document.write("<html><head><title></title></head><body>"+a+"</body>"),setTimeout(function(){t.document.close(),t.focus(),t.print(),t.close()},1e3)}}).fail(function(e){$(".loading").hide(),console.log("error")})},ShowCardDetails=function(e,a,t){var o=$(a).closest(".cards__detail"),n=$(o).find("#MyWallet_Btn_ShowDetails");("false"==$(n).attr("data-iscached")&&!$(o).find(".js-card-collapsable").hasClass("show")||t)&&$.ajax({async:!0,cache:!1,url:getSiteUrl()+"/MyWallet/GetRedemptionTransactionDetail/"+e}).done(function(e){if($(n).attr("data-iscached","true"),t||("H"==$(n).html()?$(n).html("C"):$(n).html("H")),$(o).find("#cardCollapsableContent").html(e),$(o).find(".js-pushpay-table").length>0){var a=$(o).find(".js-pushpay-table");a.DataTable({dom:'t<"d-flex align-items-center flex-column flex-md-row justify-content-center table__filter"<"pagination__section"p>l>',ordering:!1,language:{lengthMenu:'<div class="form__select form__select--table"><select name="country" class="form__input--light form__select__input"><option selected value="10">'+$("#hdnShow10PerPage").val()+'</option><option value="20">'+$("#hdnShow20PerPage").val()+'</option><option value="30">'+$("#hdnShow30PerPage").val()+'</option><option value="-1">'+$("#hdnAll").val()+"</option></select></div>",paginate:{previous:"<span class='paginate-left'>I</span>",next:"<span class='paginate-left'>B</span>"},emptyTable:$("#empty-table").data("empty-text")},drawCallback:function(){parseInt($(o).find(".js-pushpay-table").length)<=10?a.next(".table__filter").removeClass("d-flex").addClass("d-none"):a.next(".table__filter").removeClass("d-none").addClass("d-flex")}})}}).fail(function(e){console.log(e)})},ShowCertificateDetails=function(e,a,t){var o=$(a).closest(".certificate");"false"==$(o).attr("data-iscached")||t?$.ajax({async:!0,cache:!1,url:getSiteUrl()+"/MyWallet/GetRedemptionTransactionDetail/"+e}).done(function(e){$(o).attr("data-iscached","true"),$(o).find(".collapsedView").addClass("d-none"),$(o).find(".expandedView").html(e).removeClass("d-none")}).fail(function(e){console.log(e)}):$(o).find(".collapsedView").hasClass("d-none")?($(o).find(".collapsedView").removeClass("d-none"),$(o).find(".expandedView").addClass("d-none")):($(o).find(".collapsedView").addClass("d-none"),$(o).find(".expandedView").removeClass("d-none"))},ShowSavedTokenDetails=function(e,a){var t=$(a).closest(".cards__detail"),o=$(t).find("#MyWallet_Btn_ShowDetails");"false"!=$(o).attr("data-iscached")||$(t).find(".js-card-collapsable").hasClass("show")||$.ajax({async:!0,cache:!1,url:getSiteUrl()+"/MyWallet/GetSavedTokenDetails/"+e}).done(function(e){$(o).attr("data-iscached","true"),"H"==$(o).html()?$(o).html("C"):$(o).html("H"),$(t).find("#cardCollapsableContent").html(e)}).fail(function(e){console.log(e)})},ViewEditPIN=function(e,a,t){$("#edit-pin-modal").unbind("hide.bs.modal"),$CurrentActiveCard=$(e).closest(".cards__detail").find(".cards__collapse"),$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ViewChangePINV2",data:{cardPin:t,TransactionId:a}}).done(function(e){$("#edit-pin-modal .modal__body").html(e),$("#edit-pin-modal #ChangePINButtons").show(),$("#edit-pin-modal #ChangePINSuccessButtons").css("display","none"),$("#edit-pin-modal").modal("toggle")}).fail(function(e){console.log("error")})},UpdatePIN=function(){var e=$("#formViewChangePIN").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/Wallet/UpdatePIN",data:e}).done(function(e){if(e.htmlText)$("#edit-pin-modal #formViewChangePIN").hide(),$("#edit-pin-modal #ChangePINButtons").hide(),$("#edit-pin-modal .ChangePINSuccessMsg").css("display","block"),$("#edit-pin-modal #ChangePINSuccessButtons").css("display","block"),$("#edit-pin-modal").off("hide.bs.modal").on("hide.bs.modal",function(){UpdateCardDetailsAfterPINChange()});else if(null!=e.errorMsg||void 0!=e.errorMsg){var a=e.errorMsg.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#formViewChangePIN .validation-summary-valid").addClass("validation-summary-errors").removeClass("validation-summary-valid"),$("#formViewChangePIN .validation-summary-errors").show(),$("#formViewChangePIN .ValidationSummaryCustom").show(),$("#formViewChangePIN .validation-summary-errors ul").html(t)}}).fail(function(e){console.log(e)})},UpdateCardDetailsAfterPINChange=function(){$CurrentActiveCard.length>0?ShowCardDetails($("#edit-pin-modal #TransactionId").val(),$CurrentActiveCard,!0):window.location=window.location},ViewEditCardProfilePopup=function(e){$CurrentActiveCard=$(e).closest(".cards__detail").find(".cards__collapse");var a=$(e).closest(".cards__section");0==a.length&&(a=$(e).closest(".cards__detail").find(".cards__detail__address"));var t=$(a).find("span[name~='FIS_Card_FirstName']").text(),o=$(a).find("span[name~='FIS_Card_LastName']").text(),n=$(a).find("span[name~='FIS_Card_Email']").text(),r=$(a).find("span[name~='FIS_Card_Address1']").text(),l=$(a).find("span[name~='FIS_Card_Address2']").text(),i=$(a).find("span[name~='FIS_Card_City']").text(),d=$(a).find("span[name~='FIS_Card_State']").text(),s=$(a).find("span[name~='FIS_Card_Zipcode']").text(),c=$(a).find("span[name~='FIS_Card_Country']").text(),m=$(a).find("span[name~='TransactionId']").text(),u=$(a).find("span[name~='FIS_Card_CardProxy']").text();0==u.length&&(u=$(a).find("#hdncardProxy").val());var f=$(a).find("span[name~='FIS_Card_Phone']").text(),h={TransactionID:m,CardProxy:u,FirstName:t,LastName:o,Email:n,Address1:r,Address2:l,City:i,State:d,Zip:s,CountryCode:c,Phone:f};$.ajax({async:!1,cache:!1,type:"GET",url:getSiteUrl()+"/EditFISCardProfileV2",data:{dataString:JSON.stringify(h)}}).done(function(e){$("#edit-cardprofile-modal .modal__body").html(e),$("#edit-cardprofile-modal").modal("show")}).fail(function(e){console.log(e)})},ViewEditCardProfilePopupCertificate=function(e){$CurrentActiveCard=$(e).closest(".certificate");var a=$(e).closest(".certificate"),t=$(a).find("span[name~='FIS_Card_FirstName']").text(),o=$(a).find("span[name~='FIS_Card_LastName']").text(),n=$(a).find("span[name~='FIS_Card_Email']").text(),r=$(a).find("span[name~='FIS_Card_Address1']").text(),l=$(a).find("span[name~='FIS_Card_Address2']").text(),i=$(a).find("span[name~='FIS_Card_City']").text(),d=$(a).find("span[name~='FIS_Card_State']").text(),s=$(a).find("span[name~='FIS_Card_Zipcode']").text(),c=$(a).find("span[name~='FIS_Card_Country']").text(),m=$(a).find("span[name~='TransactionId']").text(),u=$(a).find("span[name~='FIS_Card_CardProxy']").text();0==u.length&&(u=$(a).find("#hdncardProxy").val());var f=$(a).find("span[name~='FIS_Card_Phone']").text(),h={TransactionID:m,CardProxy:u,FirstName:t,LastName:o,Email:n,Address1:r,Address2:l,City:i,State:d,Zip:s,CountryCode:c,Phone:f};$.ajax({async:!1,cache:!1,type:"GET",url:getSiteUrl()+"/EditFISCardProfileV2",data:{dataString:JSON.stringify(h)}}).done(function(e){$("#edit-cardprofile-modal .modal__body").html(e),$("#edit-cardprofile-modal").modal("show")}).fail(function(e){console.log(e)})},ViewWalletProfilePopup=function(e){$CurrentActiveCard=$(e).closest(".cards__detail").find(".cards__collapse");var a=$(e).closest(".cards__section");0==a.length&&(a=$(e).closest(".cards__detail").find(".cards__detail__address"));var t=$(a).find("span[name~='Wallet_FirstName']").text(),o=$(a).find("span[name~='Wallet_LastName']").text(),n=$(a).find("span[name~='Wallet_Email']").text(),r=$(a).find("span[name~='Wallet_Address1']").text(),l=$(a).find("span[name~='Wallet_Address2']").text(),i=$(a).find("span[name~='Wallet_City']").text(),d=$(a).find("span[name~='Wallet_State']").text(),s=$(a).find("span[name~='Wallet_Zipcode']").text(),c=$(a).find("span[name~='Wallet_Country']").text(),m=$(a).find("span[name~='Wallet_Phone']").text(),u={FirstName:t,LastName:o,Email:n,Address1:r,Address2:l,City:i,State:d,Zip:s,CountryCode:c,Phone:m};$.ajax({async:!1,cache:!1,type:"GET",url:getSiteUrl()+"/EditWalletProfile",data:{dataString:JSON.stringify(u)}}).done(function(e){$("#edit-walletprofile-modal .modal__body").html(e),$("#edit-walletprofile-modal").modal("show")}).fail(function(e){console.log(e)})},UpdateCardProfileInfo=function(){var e=$("#formEditFISCardProfile");$.validator.unobtrusive.parse(e),e.validate();var a=e.valid();if(a){var t=$("#formEditFISCardProfile").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/UpdateFISCardProfile",data:t}).done(function(e){if(e.htmlText)$("#edit-cardprofile-modal").modal("toggle"),window.location.href.toLowerCase().indexOf("confirmredemptionoption")>0||window.location.href.toLowerCase().indexOf("transactiondetail")>0?window.location=window.location.href.split("#")[0]:$CurrentActiveCard.length>0?($CurrentActiveCard.closest(".cards__detail").length&&ShowCardDetails($("#edit-cardprofile-modal #TransactionID").val(),$CurrentActiveCard,!0),$CurrentActiveCard.closest(".certificate").length&&window.location.href.toLowerCase().indexOf("mywallet/detail")<=0&&ShowCertificateDetails($("#edit-cardprofile-modal #TransactionID").val(),$CurrentActiveCard,!0),$CurrentActiveCard.closest(".certificate").length&&window.location.href.toLowerCase().indexOf("mywallet/detail")>0&&(window.location=window.location.href.split("#")[0])):window.location="/MyWallet";else if(null!=e.errorMsg&&void 0!=e.errorMsg&&""!=e.errorMsg){var a=e.errorMsg.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#edit-cardprofile-modal .validation-summary-valid").addClass("validation-summary-errors").removeClass("validation-summary-valid"),$("#edit-cardprofile-modal .validation-summary-errors").show(),$("#edit-cardprofile-modal .ValidationSummaryCustom").show(),$("#edit-cardprofile-modal .validation-summary-errors ul").html(t)}}).fail(function(e){console.log(e)})}},UpdateWalletProfileInfo=function(e){var a=$("#formEditWalletProfile");$.validator.unobtrusive.parse(a),a.validate();var t=a.valid();if(t){var o=$("#formEditWalletProfile").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/UpdateWalletProfile",data:o}).done(function(e){if(e.htmlText)$("#edit-walletprofile-modal").modal("toggle"),parentElement=$(".cards__detail__address"),window.location.href.toLowerCase().indexOf("confirmredemptionoption")>0&&ShowWalletProfileInfo(o,parentElement);else if(null!=e.errorMsg&&void 0!=e.errorMsg&&""!=e.errorMsg){var a=e.errorMsg.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#edit-walletprofile-modal .validation-summary-valid").addClass("validation-summary-errors").removeClass("validation-summary-valid"),$("#edit-walletprofile-modal .validation-summary-errors").show(),$("#edit-walletprofile-modal .ValidationSummaryCustom").show(),$("#edit-walletprofile-modal .validation-summary-errors ul").html(t)}}).fail(function(e){console.log(e)})}},ShowWalletProfileInfo=function(e,a){$.ajax({async:!1,cache:!1,type:"GET",url:getSiteUrl()+"/ShowWalletProfile",data:e}).done(function(e){$(parentElement).html(e)}).fail(function(e){console.log(e)})},getCardtransactions=function(e,a){var t=$("#hdnCardtransactionTypeValue").val();void 0!=t&&null!=t&&""!=t||(t="Last30Day"),void 0!=e&&null!=e||(e=1);var o=$(a).closest(".cards__actions").find("#hdncardProxy").val();void 0!=o&&null!=o||(o=$("#hdnTransaction_CardProxy").val());var n=$(a).closest(".cards__actions").find("#hdncurrency").val();void 0!=n&&null!=n||(n=$("#hdnTransaction_Currency").val());var r=$(a).closest(".cards__actions").find("#hdnProductCategory").val();void 0!=r&&null!=r||(r=$("#hdnTransaction_ProductCategory").val());var l=$(a).closest(".cards__actions").find("#hdnRedemptionProductName").val();void 0!=l&&null!=l||(l=$("#hdnTransaction_RedemptionProductName").val());var i=$(a).closest(".cards__actions").find("#hdnCardEnding").val();void 0!=i&&null!=i||(i=$("#hdnTransaction_CardEnding").val()),void 0!=o&&null!=o&&void 0!=n&&null!=n&&$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/CardTransactionsV2",data:{cardProxy:o,ProductCategory:r,TransactionType:t,Currency:n,ProductName:l,CardEnding:i,pageNo:e},beforeSend:function(){$(".loading").show()}}).done(function(e){if($(".loading").hide(),e.indexOf("validation-summary-errors")<0){$("#transactions-modal .modal__body--transcationmodal").html(e),$("#hdnTransaction_CardProxy").val(o),$("#hdnTransaction_Currency").val(n),$("#hdnTransaction_ProductCategory").val(r),$("#hdnTransaction_RedemptionProductName").val(l),$("#hdnTransaction_CardEnding").val(i);var a=$("#hdnTransaction_Count").val();if($(".js-transactions-table").length>0){$(".js-transactions-table").DataTable({dom:'<"modal__body table__wrapper mt-0 pt-0"t><"d-flex justify-content-center table__footer"pl>',ordering:!1,language:{lengthMenu:'<div class="form__select form__select--table"><select name="noOfTransactions" class="form__input--light form__select__input"><option selected value="10">'+$("#hdnShow10PerPage").val()+'</option><option value="20">'+$("#hdnShow20PerPage").val()+'</option><option value="30">'+$("#hdnShow30PerPage").val()+'</option><option value="-1">'+$("#hdnAll").val()+"</option></select></div>",paginate:{previous:"<span class='paginate-left'>I</span>",next:"<span class='paginate-left'>B</span>"},emptyTable:$("#empty-table").data("empty-text")},drawCallback:function(){a<=10?($("#transactions-modal div.dataTables_paginate").addClass("d-none"),$("#transactions-modal div.dataTables_length").addClass("d-none")):($("#transactions-modal div.dataTables_paginate").removeClass("d-block"),$("#transactions-modal div.dataTables_length").removeClass("d-block"))}})}}$("#transactions-modal").modal("show")}).fail(function(e){$(".loading").hide(),console.log("error")})},showmoreCardTransactions=function(e){var a=e.getAttribute("data-pageno");getCardtransactions(a),$("#btnShowMore").attr("data-pageno",parseInt(a)+1)},clearGenericModal=function(){$("#generic-modal .modal__header").html(""),$("#generic-modal .modal__body").html(""),$("#generic-modal #t2b__content").html(""),$("#generic-modal").modal("dispose")},ShowBootstrapModal=function(e,a,t,o,n,r,l,i){clearGenericModal(),null!=e&&void 0!=e&&""!=e&&$("#generic-modal .modal__header").html("<div class='modal__title'>"+e+"</div>"),null!=a&&void 0!=a&&""!=a&&$("#generic-modal .modal__header").append("<div class='modal__desc'>"+a+"</div>"),null!=t&&void 0!=t&&""!=t&&(o?($("#generic-modal .modal__content").append("<div id='t2b__content'>"+t+"</div>"),$("#generic-modal .modal__body").addClass("d-none")):($("#generic-modal .modal__body").html(t),$("#generic-modal .modal__body").removeClass("d-none"))),void 0!=n&&null!=n&&$("#generic-modal").on("show.bs.modal",n),void 0!=r&&null!=r&&$("#generic-modal").on("shown.bs.modal",r),void 0!=l&&null!=l&&$("#generic-modal").on("hide.bs.modal",l),void 0!=i&&null!=i&&$("#generic-modal").on("hidden.bs.modal",i),$(".modal-backdrop").hasClass("show")&&$(".modal-backdrop").remove(),$("#generic-modal").modal("show")},UpdateNoOfCardsShow=function(e){$(".pagination li:first").click(),cardsList.page=$(e).val(),cardsList.update()},Cards_NavigateToPrev=function(){$(".pagination li.active").prev().trigger("click")},Cards_NavigateToNext=function(){$(".pagination li.active").next().trigger("click")},UpdateTransferToBankTransactionDetailPageView=function(){null!=t2bhtmlResult&&void 0!=t2bhtmlResult||(t2bhtmlResult=GetTransferToBankModals()),$.ajax({async:!0,cache:!1,type:"GET",url:getSiteUrl()+"/Services/Get",data:{url:"/v1/ach/BankAccount/withpersonid/"+$("#hdnPersonID").val()}}).done(function(e){if(void 0!=e){var a=JSON.parse(e);if(void 0!=a&&null!=a){var t=a.success,o=a.bankName,n=a.last4OfAccount,r=(a.errorCode,a.extFundsId);null!=t&&void 0!=t&&t?null!=n&&void 0!=n?($(".clslnkTransferToBank").attr("data-popuptype","TransferToBank"),$("#lblBankName").text(o),$("#hdnFrom_BankName").val(o),$("#hdnFrom_ExtFundsID").val(r),$("#lblAccountNumber").html(n.replace(/x/g,'<span class="modal__asterisk">J</span>')),$("#divExistingBank").removeClass("d-none"),$("#divNewBank").addClass("d-none")):($(".clslnkTransferToBank").attr("data-popuptype","AddNewBank"),$("#divExistingBank").addClass("d-none"),$("#divNewBank").removeClass("d-none")):($(".clslnkTransferToBank").attr("data-popuptype","RetryBankRetrieve"),$("#divExistingBank").addClass("d-none"),$("#divNewBank").removeClass("d-none"))}}}).fail(function(e){console.log("error")})},ViewUpdatePassword=function(){$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ChangePasswordV2"}).done(function(e){$("#update-password-modal .modal_body").html(e),$("#update-password-modal").modal("toggle"),$("#update-password-modal").on("shown.bs.modal",function(){$(".js-show-password-multiple").off("click").on("click",function(){$(".js-password-toggle-multiple").each(function(){"password"===$(this).attr("type")?$(this).attr("type","text"):$(this).attr("type","password")});var e=$(this).attr("id");e.indexOf("show")>-1?$(this).html($("#hdnHidePasswords").val()).attr("id","hidepwd"):e.indexOf("hide")>-1&&$(this).html($("#hdnShowPasswords").val()).attr("id","showpwd")})})}).fail(function(e){console.log("error")})},UpdatePassword=function(){var e=$("#formViewUpdatePassword");$.validator.unobtrusive.parse(e),e.validate();var a=e.valid();if(a){var t=$("#formViewUpdatePassword").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/ChangePasswordV2",data:t}).done(function(e){if(e.success)window.location.href="/Profile";else if(!e.success&&(null!=e.errorMessage||void 0!=e.errorMessage)){var a=e.errorMessage.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#formViewUpdatePassword .validation-summary-valid.error").css({display:"block"}),$("#formViewUpdatePassword .validation-summary-valid.error").find("li").remove("li"),$("#formViewUpdatePassword .validation-summary-valid.error").find("ul").append(t)}}).fail(function(e){console.log(e)})}},ViewUpdateSecurityQuestion=function(){$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ChangeChallengeQuestionV2"}).done(function(e){$("#update-sq-modal .modal_body").html(e),$("#update-sq-modal").modal("toggle"),$("#update-sq-modal").on("shown.bs.modal",function(){$(".js-show-password").off("click").on("click",function(){$(".js-password-toggle").each(function(){"password"===$(this).attr("type")?$(this).attr("type","text"):$(this).attr("type","password")});var e=$(this).attr("id");e.indexOf("show")>-1?$(this).html($("#hdnHide").val()).attr("id","hidepwd"):e.indexOf("hide")>-1&&$(this).html($("#hdnShow").val()).attr("id","showpwd")})})}).fail(function(e){console.log("error")})},UpdateSecurityQuestion=function(){var e=$("#formViewUpdateSecurityQuestion");$.validator.unobtrusive.parse(e),e.validate();var a=e.valid();if(a){var t=$("#formViewUpdateSecurityQuestion").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/ChangeChallengeQuestionV2",data:t}).done(function(e){if(e.success)window.location.href="/Profile";else if(!e.success&&(null!=e.errorMessage||void 0!=e.errorMessage)){var a=e.errorMessage.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#formViewUpdateSecurityQuestion .validation-summary-valid.error").css({display:"block"}),$("#formViewUpdateSecurityQuestion .validation-summary-valid.error").find("li").remove("li"),$("#formViewUpdateSecurityQuestion .validation-summary-valid.error").find("ul").append(t)}}).fail(function(e){console.log(e)})}},manualEntryCardNum,ChangeToCardEntry=function(){$(".ChangeToCard").length>0&&($(".ChangeToCard").addClass("d-none"),$(".ChangeToCardEntry").removeClass("d-none")),manualEntryCardNum=$("input[type='hidden'][name='CardNumber']").val(),$("input[type='hidden'][name='CardNumber']").val(""),$("input[type='hidden'][name='CardNumber']").attr("type","text"),$("#cardlast4").hide(),$("#Notes_ReloadableCard").hide(),$("#ancLostThisCard").hide(),$("#Notes_UseOtherCard").show()},ChangeToCard=function(){$(".ChangeToCard").length>0&&($(".ChangeToCard").removeClass("d-none"),$(".ChangeToCardEntry").addClass("d-none")),$("input[type='text'][name='CardNumber']").val(manualEntryCardNum),$("input[type='text'][name='CardNumber']").attr("type","hidden"),$("#cardlast4").show(),$("#Notes_ReloadableCard").show(),$("#ancLostThisCard").show(),$("#Notes_UseOtherCard").hide()},SelectReplaceRedemptionOption=function(e,a){var t=$("#frmRedemptionOptions").find('input[name="__RequestVerificationToken"]').val();void 0!=t&&""!=t||(t=$("#frmConfirmation").find('input[name="__RequestVerificationToken"]').val()),$.ajax({async:!0,cache:!1,type:"POST",url:getSiteUrl()+"/RedemptionOptions",data:{__RequestVerificationToken:t,RedemptionOptionID:e}}).done(function(e){var a=document.open("text/html","replace");a.write(e),a.close()}).fail(function(e){console.log(e)})},ShowForgotPassword=function(){$.ajax({url:getSiteUrl()+"/ForgotPasswordV2",success:function(e){$("#forgotPasswordPlaceholder").html("").html(e),$("#forgot-password-modal").modal("show")},error:function(e){console.log(e)}})},VerifyUsername=function(){var e=$("#frmForgetPassword").serialize();$.ajax({url:getSiteUrl()+"/ForgotPasswordV2",type:"POST",data:e,success:function(e){$("#forgotPasswordPlaceholder").html("").html(e),$(".modal-backdrop").remove(),$("#forgot-password-modal").modal("show")},error:function(e){console.log(e)}})},ValidateProfile=function(){var e=$("#formCreateProfile");$.validator.unobtrusive.parse(e),e.validate();var a=e.valid();a&&("true"==$("#hdnSiteAgreementAccepted").val().toLowerCase()?$("#formCreateProfile").submit():$("#SiteAgreementAccepted").is(":checked")?($("#formCreateProfile .validation-summary-valid.error").length>0?($("#formCreateProfile").find(".validation-summary-valid.error ul").remove(),$("#formCreateProfile").find(".validation-summary-valid.error").css({display:"none"})):($("#formCreateProfile").find(".validation-summary-errors.error ul").remove(),$("#formCreateProfile").find(".validation-summary-errors.error").css({display:"none"})),$("#formCreateProfile").submit()):$("#formCreateProfile .validation-summary-valid.error").length>0?($("#formCreateProfile .validation-summary-valid.error").find("li").remove("li"),$("#formCreateProfile .validation-summary-valid.error").find("ul").append("<li>"+$("#hdnCheckboxRequired").val()+"</li>"),$("#formCreateProfile .validation-summary-valid.error").css({display:"block"})):($("#formCreateProfile .validation-summary-errors.error").find("li").remove("li"),$("#formCreateProfile .validation-summary-errors.error").find("ul").append("<li>"+$("#hdnCheckboxRequired").val()+"</li>")))},ViewSecurePayment=function(){$("#secure-payment-modal .validation-summary-valid.error").css({display:"none"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li");var e=$('input:radio[name="wallet-choice"]:checked'),a="new-wallet"===e[0].id?"/CreateWalletV2":"/AddToWalletV2";$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+a}).done(function(e){$("#secure-payment-modal .modal_body").html(e),$("#secure-payment-modal").modal("toggle")}).fail(function(e){console.log("error")})},AddToWallet=function(){var e=$("#formAddToWallet");$.validator.unobtrusive.parse(e);var a=e.validate(),t=e.valid();if(t){ShowLoader();var o=$("#formAddToWallet").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/AddToWalletV2",data:o}).done(function(e){if(e.success)window.location.href="/"+e.redirectRoute;else if(!e.success&&(null!=e.errorMessage||void 0!=e.errorMessage)){var a=e.errorMessage.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#secure-payment-modal .validation-summary-valid.error").css({display:"block"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li"),$("#secure-payment-modal .validation-summary-valid.error").find("ul").append(t)}HideLoader()}).fail(function(e){console.log(e)})}else{var n="";$.each(a.errorList,function(e,a){n=n+"<li>"+a.message+"</li>"}),$("#secure-payment-modal .validation-summary-valid.error").css({display:"block"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li"),$("#secure-payment-modal .validation-summary-valid.error").find("ul").append(n)}},CreateWallet=function(){var e=$("#formCreateWallet");$.validator.unobtrusive.parse(e);var a=e.validate(),t=e.valid();if(t){ShowLoader();var o=$("#formCreateWallet").serialize();$.ajax({async:!1,cache:!1,type:"POST",url:getSiteUrl()+"/CreateWalletV2",data:o}).done(function(e){if(e.success)window.location.href="/"+e.redirectRoute;else if(!e.success&&(null!=e.errorMessage||void 0!=e.errorMessage)){var a=e.errorMessage.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#secure-payment-modal .validation-summary-valid.error").css({display:"block"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li"),$("#secure-payment-modal .validation-summary-valid.error").find("ul").append(t)}HideLoader()}).fail(function(e){console.log(e)})}else{var n="";$.each(a.errorList,function(e,a){n=n+"<li>"+a.message+"</li>"}),$("#secure-payment-modal .validation-summary-valid.error").css({display:"block"}),$("#secure-payment-modal .validation-summary-valid.error").find("li").remove("li"),
$("#secure-payment-modal .validation-summary-valid.error").find("ul").append(n)}},CreateGDPRPolicyCookie=function(){$.ajax({url:getSiteUrl()+"/CreateGDPRPolicyCookie",success:function(e){1==e&&($(".cookie-container").addClass("d-none"),$(".grecaptcha-badge").attr("style",function(e,a){return a+"bottom: 35px !important;"}))},error:function(e){console.log("Error in cookie creation")}})},DisplayCMSW9Information=function(){$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Wallet/DisplayW9Information"}).done(function(e){if("SUCCESS"==e.result)if("SHOW_SINGLEW9"==e.type)ShowCMSW9ByParticipantID(e.participantID);else if("SHOW_MULTIPLEW9"==e.type){var a="Tax Form History",t=e.headerText,o="<div class='form__section--condensed form__section--borderless'>";o+="<div class= 'form__group form__select'>",o+="<select class='form__input form__select__input' name='w9dropdownlist' enabled='true' onchange='ShowCMSW9ByParticipantID(this.value)'>",o+="<option selected value=''>Select One</option>";for(var n=0;n<e.ddlList.length;n++)o+="<option value='"+e.ddlList[n].value+"'> "+e.ddlList[n].text+"</option>";o+="</select></div></div>",$("#multipleW9-modal .modal__header").html(""),$("#multipleW9-modal .modal__body--w9").html(""),$("#multipleW9-modal").modal("dispose"),$("#multipleW9-modal .modal__header").html("<div class='modal__title'>"+a+"</div>"),$("#multipleW9-modal .modal__header").append("<div class='modal__desc'>"+t+"</div>"),$("#multipleW9-modal .modal__body--w9").html(o),$("#multipleW9-modal .modal__body").removeClass("d-none"),$("#multipleW9-modal").modal("show")}}).fail(function(e){console.log("error")})},addIFrameListnerEventReference=null,addIFrameListner=function(){RemoveEventHandler();var e=window.addEventListener?"addEventListener":"attachEvent",a=window[e],t="attachEvent"==e?"onmessage":"message";a(t,IFrameOnMessage,!1)},closeW9Popup=!1,IFrameOnMessage=function(e){var a=!0;switch(e.data){case"Child_W9Cancel_Click":$("#w9-modal .modal__close").click();break;case"Child_W9_Submit_SUCCESS":closeW9Popup=!0,ClosePopup(),$.ajax({cache:!1,async:!0,type:"Get",url:getSiteUrl()+"/Wallet/W9Success",success:function(e){location.reload()},error:function(e,a,t){sendEmail(e,"W9Success")}});break;case"Child_W9_Submit_ERROR":alert("Error inserting information");break;default:a=!1}addIFrameListnerEventReference=arguments.callee,a&&RemoveEventHandler()},OpenCookieTermsPopup=function(){$("#cookies-term-modal").modal("toggle")},ShowSiteAgreementTerms=function(e){$.ajax({async:!0,cache:!0,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/Home/SiteAgreementTerms",data:{key:e}}).done(function(e){var a=$("#site-agreement-terms");a.find(".modal__title").text(e.modalTitle),a.find(".modal__text").html(e.htmlText),a.modal("show"),$("#site-agreement-terms, .siteAgreementTerms").animate({scrollTop:0},"slow")}).fail(function(e){console.log("error")})},NavLogoClickRedirection=function(e){var a=window.location.pathname.toLowerCase();switch(a){case"/mywallet":break;case"/selectoption":case"/confirmredemptionoption":case"/createprofile":e?$("#logout-modal").modal("show"):($("#logout-modal .modal__desc").html($("#hdnLogoutWarningText").val()),$("#logout-modal").modal("show"),$("#logout-modal").on("hide.bs.modal",function(){$("#logout-modal .modal__desc").html($("#hdnAuthLogoutWarningText").val())}));break;case"/successredemption":e?window.location="/MyWallet":window.location="/TransactionDetail";break;default:e&&(window.location="/MyWallet")}},GetTransferToBankModals=function(){return $.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/TransferToBank",data:{email:$("#hdnRecipient_EmailAddress").val()},success:function(e){t2bhtmlResult=e}}),t2bhtmlResult},ViewActivateCardModal=function(e,a,t,o){$("#activate-card-modal").unbind("hide.bs.modal"),null!=e&&($currentActiveCard=$(e).closest(".cards__detail").find(".cards__collapse")),$.ajax({async:!1,cache:!1,type:"GET",contentType:"text/html; charset=utf-8",url:getSiteUrl()+"/ActivateVPCard",data:{CardLastFour:t,TransactionId:a,RedeemPromocode:o}}).done(function(e){$("#activate-card-modal").html(e),$("#activate-card-modal").modal("toggle")}).fail(function(e){console.log("error")})},ActivateReloadableCard=function(){$("#site-agreement-terms").length>0&&$("#site-agreement-terms").modal("hide");var e=$("#formActivateReloadableCard");$.validator.unobtrusive.parse(e);var a=(e.validate(),e.valid());if(a){ShowLoader();var t=$("#formActivateReloadableCard").serialize();$.ajax({async:!0,cache:!1,type:"POST",url:getSiteUrl()+"/ActivateVPCard",data:t}).done(function(e){if(e.isActivationSuccesful)window.location.href="/"+e.redirectRoute;else if(!e.isActivationSuccesful&&(null!=e.errorMsg||void 0!=e.errorMsg)){$("#ActivateCard.Btn.Submit").off("click","**"),$("#ActivateCard.Btn.Submit").on("click","ActivateReloadableCard();");var a=e.errorMsg.split("|"),t="";$.each(a,function(e,a){t+="<li>"+a+"</li>"}),$("#formActivateReloadableCard .validation-summary-valid.error").css({display:"block"}),$("#formActivateReloadableCard .validation-summary-valid.error").find("li").remove("li"),$("#formActivateReloadableCard .validation-summary-valid.error").find("ul").append(t)}HideLoader()}).fail(function(e){HideLoader(),console.log("error")})}},disallowEnterKey=function(){$("#formActivateReloadableCard").on("keydown",function(e){var a=e.keyCode||e.which;if(13===a)return e.preventDefault(),!1})},validateAndShowTerms=function(e,a){var t=$(e),o=$("#"+t.closest("form").attr("id"));$.validator.unobtrusive.parse(o);var n=(o.validate(),o.valid());n&&ShowTermsById(a)};